{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./packages/Barrage/constant.ts","webpack:///./packages/utils/utils.ts","webpack:///./packages/Barrage/utils.ts","webpack:///./packages/Barrage/index.ts","webpack:///./src/danmu.js","webpack:///./packages/Barrage/Scene.ts","webpack:///./packages/Barrage/Sprite.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","defaultSpriteConfig","fontSize","fontColor","fontFamily","avatarSize","type","padding","radius","defaultGlobalConfig","lifeTime","imageAndTextSpace","screenSpace","employTrackSpaceX","employTrackSpaceY","createId","pre","S4","Math","random","toString","substring","wait","time","Promise","resolve","setTimeout","createCanvas","id","containerWidth","containerHeight","element","window","document","createElement","width","height","constant_1","loadingImage","src","image","Image","crossOrigin","onload","onerror","getRandomColor","parseInt","String","mixConfig","config","defaultConfig","keys","forEach","getCanUseTrack","employTrack","allTrack","spaceTracks","length","useTrack","map","range","split","parseFloat","sort","a","b","tracks","track","index","push","prevTrack","min","max","start","end","startTrack","undefined","spaceTrack","__importDefault","this","mod","Scene_1","Sprite_1","utils_1","default","container","globalConfig","scene","stop","clear","content","avatar","add","ctx","barrage","getElementById","count","timer","setInterval","clearInterval","utils_2","utils_3","STATUS","Scene","sprites","queue","initCanvas","status","addEventListener","resize","run","rect","top","barrageWidth","position","speed","rangeWidth","speedX","sprite","setAnimation","calcAnimation","employ","values","employTrackPosition","trackTop","calcEmployTrack","addSprite","shift","calcPosition","render","requestAnimationFrame","offsetWidth","offsetHeight","canvas","style","display","append","getContext","clearRect","uid","animation","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Sprite","spriteArgs","font","calcRect","templateCanvas","getImageData","templateCtx","draw","drawImage","avatarStatus","paddingTop","paddingRight","paddingBottom","paddingLeft","save","measureText","restore","barrageAllWidth","barrageAllHeight","floor","left","avatarSpaceTop","drawAvatar","img","imageHeight","imageWidth","textSpaceTop","drawText","drawBorder","checkEmployTrack","pos","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeStyle","strokeRect","fillStyle","textAlign","textBaseline","fillText","roundImageArgs","x","y","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","clip"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,+BCjFrDrB,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtDnB,EAAQkC,oBAAsB,CAC1BC,SAAU,GACVC,UAAW,OACXC,WAAY,kBACZC,WAAY,GACZC,KAAM,OACNC,QAAS,CAAC,GAAI,GAAI,GAAI,IACtBC,OAAQ,IAEZzC,EAAQ0C,oBAAsB,CAC1BH,KAAM,SACNI,SAAU,KAEd3C,EAAQ4C,kBAAoB,GAC5B5C,EAAQ6C,YAAc,GACtB7C,EAAQ8C,kBAAoB,GAC5B9C,EAAQ+C,kBAAoB,I,6BCjB5BnC,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAUtDnB,EAAQgD,SATR,SAAkBC,EAAM,IACpB,SAASC,IACL,OAA+B,OAArB,EAAIC,KAAKC,UAAuB,GAAGC,SAAS,IAAIC,UAAU,GAKxE,OAAOL,GAFKC,IAAOA,IAAO,KAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAOA,IAAOA,KAYzFlD,EAAQuD,KAPR,SAAcC,EAAO,KACjB,OAAO,IAAIC,QAAQC,IACfC,WAAW,KACPD,KACDF,MAIXxD,EAAQ4D,aAAe,CAACC,EAAIC,EAAgBC,KACxC,MAAMC,EAAUC,OAAOC,SAASC,cAAc,UAI9C,OAHAH,EAAQH,GAAKA,EACbG,EAAQI,MAAQN,EAChBE,EAAQK,OAASN,EACVC,I,6BCxBXpD,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,MAAMmD,EAAa,EAAQ,GAC3BtE,EAAQuE,aAAgBC,GACb,IAAIf,QAAQC,IACf,MAAMe,EAAQ,IAAIC,MAClBD,EAAME,YAAc,GACpBF,EAAMD,IAAMA,EACZC,EAAMG,OAAS,KACXlB,EAAQe,IAEZA,EAAMI,QAAU,KACZnB,EAAQ,SAIpB1D,EAAQ8E,eAAiB,IAAO,OAASC,SAASC,OAAuB,IAAhB7B,KAAKC,WAAmB,IAC3E2B,SAASC,OAAuB,IAAhB7B,KAAKC,WAAmB,IACxC2B,SAASC,OAAuB,IAAhB7B,KAAKC,WAAmB,IAC9CpD,EAAQiF,UAAY,CAACC,EAAQC,KACzBvE,OAAOwE,KAAKD,GAAeE,QAAQ5D,SACJ,IAAhByD,EAAOzD,KACdyD,EAAOzD,GAAO0D,EAAc1D,MAG7ByD,GAsDXlF,EAAQsF,eApDR,SAAwBC,EAAaC,EAAUnB,GAC3C,MAAMoB,EAAc,GACpB,GAA2B,IAAvBF,EAAYG,OAAc,CAC1B,MAAMC,EAAWJ,EACZK,IAAIC,GAAUA,EAAMC,MAAM,KAAKF,IAAIzE,GAAS4E,WAAW5E,KACvD6E,KAAK,CAACC,EAAGC,IAAOD,EAAE,GAAKC,EAAE,GAAK,GAAK,GAClCC,EAAS,GACfR,EAASN,QAAQ,CAACe,EAAOC,KACrB,GAAc,IAAVA,EAEA,YADAF,EAAOG,KAAKF,GAGhB,MAAMG,EAAYJ,EAAOA,EAAOT,OAAS,IAClCc,EAAKC,GAAOL,EACfG,EAAU,GAAKjC,EAAWvB,kBAAoByD,EAC9CD,EAAU,GAAKE,EAGnBN,EAAOG,KAAKF,KAEhB,MAAOM,GAASP,EAAO,IAChB,CAAEQ,GAAOR,EAAOA,EAAOT,OAAS,GAOvC,GANIF,EAAS,GAAKkB,GACdjB,EAAYa,KAAK,CAACd,EAAS,GAAIkB,IAE/BlB,EAAS,GAAKmB,GACdlB,EAAYa,KAAK,CAACK,EAAKnB,EAAS,KAEhCW,EAAOT,OAAS,EAAG,CACnB,IAAIkB,EACJT,EAAOd,QAAQe,SACQS,IAAfD,EACAA,EAAaR,EAAM,IAGnBX,EAAYa,KAAK,CAACM,EAAYR,EAAM,KACpCQ,EAAaR,EAAM,YAM/BX,EAAYa,KAAK,IAAId,IAEzB,IAAK,IAAItF,EAAI,EAAGA,EAAIuF,EAAYC,OAAQxF,GAAK,EAAG,CAC5C,MAAM4G,EAAarB,EAAYvF,GAC/B,GAAI4G,EAAW,GAAKA,EAAW,GAAKzC,EAASC,EAAWvB,kBACpD,MAAO,CAAC+D,EAAW,GAAIA,EAAW,GAAKzC,EAASC,EAAWvB,mBAGnE,OAAO,O,8BC5EX,IAAIgE,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAI3F,WAAc2F,EAAM,CAAE,QAAWA,IAExDrG,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,MAAM+F,EAAUH,EAAgB,EAAQ,IAClCI,EAAWJ,EAAgB,EAAQ,KACnCK,EAAU,EAAQ,GAClB9C,EAAa,EAAQ,GAkB3BtE,EAAQqH,QAjBR,MACI,YAAYC,EAAWC,EAAe,IAClCP,KAAKO,aAAeH,EAAQnC,UAAUsC,EAAcjD,EAAW5B,qBAE/DsE,KAAKQ,MAAQ,IAAIN,EAAQG,QAAQC,EAAWN,KAAKO,cACjDP,KAAKS,KAAOT,KAAKQ,MAAMC,KAAK/F,KAAKsF,KAAKQ,OACtCR,KAAKN,MAAQM,KAAKQ,MAAMd,MAAMhF,KAAKsF,KAAKQ,OACxCR,KAAKU,MAAQV,KAAKQ,MAAME,MAAMhG,KAAKsF,KAAKQ,OAE5C,KAAI,QAAEG,EAAO,OAAEC,IACXZ,KAAKQ,MAAMK,IAAI,IAAIV,EAASE,QAAQ,CAChCO,SAAQD,WACT,CACCG,IAAKd,KAAKQ,MAAMM,U,gCCtB5B,2BAEA7D,OAAO8D,QAAU,IAAI,IACnB7D,SAAS8D,eAAe,SACxB,CACEzF,KAAM,WAGV,IAAI0F,EAAQ,EAEZhE,OAAO4D,IAAM,KACX5D,OAAOiE,MAAQC,YAAY,KACzBlE,OAAO8D,QAAQF,IAAI,CACjBF,QAAS,iBACTC,OAAQ,wIAEVK,GAAS,GACG,KACVG,cAAcnE,OAAOT,OAEtB,O,6BCnBL5C,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,MAAMiG,EAAU,EAAQ,GAClBiB,EAAU,EAAQ,GAClB/D,EAAa,EAAQ,GACrBgE,EAAU,EAAQ,GACxB,IAAIC,GAAS,EACb,MAAMC,EACF,YAAYlB,EAAWC,GACnBP,KAAKkB,MAAQ,KACblB,KAAKyB,QAAU,GACfzB,KAAK0B,MAAQ,GACb1B,KAAKzB,YAAc,GACnByB,KAAK2B,WAAWrB,GAChBN,KAAKO,aAAeA,EACpBP,KAAK4B,QAAS,EACd3E,OAAO4E,iBAAiB,SAAU7B,KAAK8B,OAAOpH,KAAKsF,OAEvD,oBACI,OAAOuB,EAEX,WAAWK,GACHL,IAAWK,KAGfL,EAASK,GAKU,OAAf5B,KAAKkB,OAGTlB,KAAK+B,MAND/B,KAAKS,QAQb,cAAcuB,EAAMC,EAAM,IACtB,MAAOC,GAAgBF,EACvB,GAA+B,kBAA3BhC,KAAKO,aAAahF,KAA0B,CAE5C,MAAO,CACH4G,SAAU,EAAED,EAAcD,GAC1BG,MAAO,EAHKpC,KAAKlD,eAAiBoF,GAAgBlC,KAAKO,aAAa5E,SAGpD,GAChB0G,WAAY,EAAEH,EAAclC,KAAKlD,eAAiBoF,IAI1D,MAAMI,IAAWtC,KAAKlD,eAAiBoF,GAAgBlC,KAAKO,aAAa5E,SACzE,MAAO,CACHwG,SAAU,CAACnC,KAAKlD,eAAgBmF,GAChCG,MAAO,CAACE,EAAQ,GAChBD,WAAY,EAAEH,EAAclC,KAAKlD,iBAGzC,IAAIyF,GACAA,EAAO1F,GAAKwE,EAAQrF,SAAS,WAC7BgE,KAAK0B,MAAMpC,KAAKiD,GAEpB,UAAUA,EAAQN,GACdM,EAAOC,aAAaxC,KAAKyC,cAAcF,EAAOP,KAAMC,IACpDjC,KAAKyB,QAAQc,EAAO1F,IAAM0F,EAE9B,gBAAgBlF,GACZ,MAAMqF,EAAS9I,OAAO+I,OAAO3C,KAAKzB,aAC5BqE,EAAsBxC,EAAQ9B,eAAeoE,EAAQ1C,KAAK6C,SAAUxF,GAC1E,OAAIuF,GAGG,KAEX,eACI,GAA0B,IAAtB5C,KAAK0B,MAAMhD,OACX,OAEJ,MAAO6D,GAAUvC,KAAK0B,OACf,CAAErE,GAAUkF,EAAOP,KACpBY,EAAsB5C,KAAK8C,gBAAgBzF,GAC7CuF,IACA5C,KAAKzB,YAAYgE,EAAO1F,IAAM+F,EAAoBvG,WAClDkG,EAAOhE,aAAc,EACrByB,KAAK+C,UAAUR,EAAQK,EAAoB,IAC3C5C,KAAK0B,MAAMsB,SAGnB,QACIhD,KAAK4B,QAAS,EAElB,OACI5B,KAAKkB,MAAQ,KACblB,KAAK4B,QAAS,EAElB,QACI5B,KAAKyB,QAAU,GAEnB,MACI,IAAKD,EAAMI,OACP,OAEJ5B,KAAKiD,eACLjD,KAAKkD,SACL,MAAMnB,EAAM/B,KAAK+B,IAAIrH,KAAKsF,MAC1BA,KAAKkB,MAAQjE,OAAOkG,sBAAsBpB,GAE9C,SACI/B,KAAKlD,eAAiBkD,KAAKM,UAAU8C,YACrCpD,KAAKjD,gBAAkBiD,KAAKM,UAAU+C,aAE1C,WAAW/C,GACP,MAAM,YAAE8C,EAAW,aAAEC,GAAiB/C,EACtCN,KAAKM,UAAYA,EACjBN,KAAKlD,eAAiBsG,EACtBpD,KAAKjD,gBAAkBsG,EACvB,MAAMC,EAAShC,EAAQ1E,aAAa,kBAAmBwG,EAAaC,GACpEC,EAAOC,MAAMpB,SAAW,WACxBmB,EAAOC,MAAMC,QAAU,QACvBxD,KAAKM,UAAUmD,OAAOH,GACtBtD,KAAKc,IAAMwC,EAAOI,WAAW,MAC7B1D,KAAK6C,SAAW,CAACvF,EAAWzB,YAAamE,KAAKjD,gBAAkBO,EAAWzB,aAE/E,SACImE,KAAKc,IAAI6C,UAAU,EAAG,EAAG3D,KAAKlD,eAAgBkD,KAAKjD,iBACnDnD,OAAOwE,KAAK4B,KAAKyB,SAASpD,QAAQuF,IAC9B,MAAMrB,EAASvC,KAAKyB,QAAQmC,GAC5BrB,EAAOsB,UAAU,CACbtI,KAAMyE,KAAKO,aAAahF,KACxBuB,eAAgBkD,KAAKlD,kBAEpByF,EAAOhE,aAAeyB,KAAKzB,YAAYgE,EAAO1F,YACxCmD,KAAKzB,YAAYgE,EAAO1F,IAE9B0F,EAAOX,OAIRW,EAAOW,OAAOlD,KAAKc,YAHZd,KAAKyB,QAAQmC,MAQpC5K,EAAQqH,QAAUmB,G,6BCzIlB,IAAIsC,EAAa9D,MAAQA,KAAK8D,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIxH,WAAU,SAAUC,EAASyH,GAC/C,SAASC,EAAUjK,GAAS,IAAMkK,EAAKH,EAAUI,KAAKnK,IAAW,MAAOoK,GAAKJ,EAAOI,IACpF,SAASC,EAASrK,GAAS,IAAMkK,EAAKH,EAAiB,MAAE/J,IAAW,MAAOoK,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAetK,EAIasK,EAAOC,KAAOhI,EAAQ+H,EAAOtK,QAJ1CA,EAIyDsK,EAAOtK,MAJhDA,aAAiB8J,EAAI9J,EAAQ,IAAI8J,GAAE,SAAUvH,GAAWA,EAAQvC,OAITwK,KAAKP,EAAWI,GAClGH,GAAMH,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKM,YAGtE1K,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,MAAMiG,EAAU,EAAQ,GAClB9C,EAAa,EAAQ,GAC3B,MAAMuH,EACF,YAAYC,EAAYvE,GACpBP,KAAK4B,QAAS,EACd5B,KAAKoC,MAAQ,CAAC,EAAG,GACjBpC,KAAKmC,SAAW,KAEhBnC,KAAKzB,aAAc,EACnB,MAAM,OAAEqC,EAAM,WAAEvF,EAAU,UAAED,EAAS,SAAED,EAAQ,WAAEG,EAAU,QAAEqF,EAAO,QAAEnF,EAAO,OAAEC,GAAY2E,EAAQnC,UAAU6G,EAAYxH,EAAWpC,qBACpI8E,KAAKW,QAAUA,EACfX,KAAKuD,MAAQ,CACT/H,UACAF,aACAG,UAEJuE,KAAK+E,KAAO,CACR1J,aACAD,YACAD,YAEJ6E,KAAKzC,aAAaqD,GAClBZ,KAAKgC,KAAOhC,KAAKgF,SAASzE,EAAaO,KACvC,MAAMwC,EAASpG,SAASC,cAAc,UACtCmG,EAAOlG,MAAQ4C,KAAKgC,KAAK,GACzBsB,EAAOjG,OAAS2C,KAAKgC,KAAK,GAC1BhC,KAAKiF,eAAiB3B,EACtBtD,KAAKkF,eAET,iBAAiBtD,GACTA,GACA5B,KAAKkF,eAGb,eACIlF,KAAKmF,YAAcnF,KAAKiF,eAAevB,WAAW,MAClD1D,KAAKmF,YAAYxB,UAAU,EAAG,EAAG3D,KAAKgC,KAAK,GAAIhC,KAAKgC,KAAK,IACzDhC,KAAKoF,KAAKpF,KAAKmF,aAEnB,OAAOrE,GACHA,EAAIuE,UAAUrF,KAAKiF,kBAAmBjF,KAAKmC,UAE/C,aAAavB,GACT,KAAOkD,EAAU9D,UAAM,OAAQ,GAAQ,YAC/BY,IAEAZ,KAAKY,cAAgBR,EAAQ7C,aAAaqD,KAAY,KACtDZ,KAAKsF,cAAe,MAJ5B,GASJ,SAASxE,GACL,MAAOyE,EAAYC,EAAcC,EAAeC,GAAe1F,KAAKuD,MAAM/H,QAC1EsF,EAAI6E,OACJ7E,EAAIiE,KAAO,GAAG/E,KAAK+E,KAAK5J,cAAc6E,KAAK+E,KAAK1J,aAChD,MAAMuK,EAAc9E,EAAI8E,YAAY5F,KAAKW,SACzCG,EAAI+E,UACJ,MAAMC,EAAmB9F,KAAKuD,MAAMjI,WAAagC,EAAW1B,kBAAoBgK,EAAYxI,MACxFsI,EAAcF,EACZO,EAAoB5J,KAAKsD,IAAIO,KAAKuD,MAAMjI,WAAY0E,KAAK+E,KAAK5J,UAChEoK,EAAaE,EACjB,MAAO,CAACtJ,KAAK6J,MAAMF,GAAkBC,GAGzC,cAAa,SAAE5D,EAAQ,MAAEC,EAAK,WAAEC,IAC5BrC,KAAKmC,SAAWA,EAChBnC,KAAKoC,MAAQA,EACbpC,KAAKqC,WAAaA,EAEtB,KAAKvB,GACD,MAAO,CAAE,CAAEmF,GAAQjG,KAAKuD,MAAM/H,QAExB0K,GAAkBlG,KAAKgC,KAAK,GAAKhC,KAAKuD,MAAMjI,YAAc,EAC5D0E,KAAKY,QAAiC,iBAAhBZ,KAAKY,QAC3BiE,EAAOsB,WAAWrF,EAAK,CACnBsF,IAAKpG,KAAKY,OACVuB,SAAU,CAAC8D,EAAMC,GACjBG,YAAarG,KAAKuD,MAAMjI,WACxBgL,WAAYtG,KAAKuD,MAAMjI,WACvBG,OAAQuE,KAAKuD,MAAM9H,SAM3B,MAAM8K,GAAgBvG,KAAKgC,KAAK,GAAKhC,KAAK+E,KAAK5J,SAAW,GAAK,EAC/D6E,KAAKwG,SAAS1F,EAAK,CACfmF,KAAMjG,KAAKuD,MAAMjI,WAAagC,EAAW1B,kBAAoBqK,EAC7DhE,IAAKsE,IAETvG,KAAKyG,WAAW3F,GAEpB,yBAAwB,KAAEmF,EAAI,MAAE7I,EAAK,KAAE7B,EAAI,eAAEuB,IACzC,QAAa,kBAATvB,GACI0K,EAAO3I,EAAWxB,sBAIb,WAATP,GACI0K,EAAOnJ,EAAiBM,EAAQE,EAAWxB,mBAMvD,WAAU,KAAEP,EAAI,eAAEuB,IACd,IAAKkD,KAAKmC,SACN,OAEJ,MAAM8D,EAAOjG,KAAKmC,SAAS,GAAKnC,KAAKoC,MAAM,GACrCH,EAAMjC,KAAKmC,SAAS,GAAKnC,KAAKoC,MAAM,GACrBpC,KAAKqC,aACrBrC,KAAKqC,WAAW,GAAK4D,GAClBjG,KAAKqC,WAAW,GAAK4D,GAEzBjG,KAAK4B,QAAS,GAGlB5B,KAAKmC,SAAW,CAAC8D,EAAMhE,GACnBjC,KAAKzB,cACLyB,KAAKzB,YAAcsG,EAAO6B,iBAAiB,CACvCT,OACA1K,OACAuB,iBACAM,MAAO4C,KAAKgC,KAAK,OAI7B,SACIhC,KAAK4B,QAAS,EAElB,WAAWd,EAAK6F,EAAM,IAClB,MAAM,KAAEV,EAAO,EAAC,IAAEhE,EAAM,GAAM0E,GACvBb,EAAiBC,GAAoB/F,KAAKgC,KAEjDlB,EAAI8F,cAAgB,EAEpB9F,EAAI+F,cAAgB,EAEpB/F,EAAIgG,WAAa,GACjBhG,EAAIiG,YAAc,0BAClBjG,EAAIkG,YAAc,wBAClBlG,EAAImG,WAAWhB,EAAMhE,EAAK6D,EAAiBC,GAE/C,SAASjF,GAAK,KAAEmF,EAAO,EAAC,IAAEhE,EAAM,IAC5BnB,EAAIoG,UAAYlH,KAAK+E,KAAK3J,UAC1B0F,EAAIiE,KAAO,GAAG/E,KAAK+E,KAAK5J,cAAc6E,KAAK+E,KAAK1J,aAChDyF,EAAIqG,UAAY,OAChBrG,EAAIsG,aAAe,MACnBtG,EAAIuG,SAASrH,KAAKW,QAASsF,EAAMhE,GAErC,kBAAkBnB,EAAKwG,GACnB,MAAM,IAAElB,EAAG,WAAEE,EAAU,YAAED,EAAW,SAAElE,GAAcmF,EACpD,IAAI,OAAE7L,GAAW6L,EACjB7L,EAASA,EAASU,KAAKsD,IAAI6G,EAAYD,GAAe,EAAIlK,KAAKsD,IAAI4G,EAAaC,GAAc,EAAI7K,EAClG,MAAO8L,EAAGC,GAAKrF,EAEf,GADArB,EAAI6E,OACAS,EAAK,CACLtF,EAAI2G,YACJ3G,EAAI4G,OAAOH,EAAI9L,EAAQ+L,GACvB1G,EAAI6G,OAAOJ,EAAIjB,EAAa7K,EAAQ+L,GACpC1G,EAAI8G,iBAAiBL,EAAIjB,EAAYkB,EAAGD,EAAIjB,EAAYkB,EAAI/L,GAC5DqF,EAAI6G,OAAOJ,EAAIjB,EAAYkB,EAAInB,EAAc5K,GAC7CqF,EAAI8G,iBAAiBL,EAAIjB,EAAYkB,EAAInB,EAAakB,EAAIjB,EAAa7K,EAAQ+L,EAAInB,GACnFvF,EAAI6G,OAAOJ,EAAI9L,EAAQ+L,EAAInB,GAC3BvF,EAAI8G,iBAAiBL,EAAGC,EAAInB,EAAakB,EAAGC,EAAInB,EAAc5K,GAC9DqF,EAAI6G,OAAOJ,EAAGC,EAAI/L,GAClBqF,EAAI8G,iBAAiBL,EAAGC,EAAGD,EAAI9L,EAAQ+L,GACvC1G,EAAI+G,YACJ/G,EAAIgH,OACJ,MAAM,MAAE1K,EAAK,OAAEC,GAAW+I,EAC1BtF,EAAIuE,UAAUe,EAAK,EAAG,EAAGhJ,EAAOC,EAAQkK,EAAGC,EAAGlB,EAAYD,GAI9DvF,EAAI+E,WAIZ7M,EAAQqH,QAAUwE","file":"danmu.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultSpriteConfig = {\n    fontSize: 36,\n    fontColor: '#fff',\n    fontFamily: 'Microsoft YaHei',\n    avatarSize: 50,\n    type: 'text',\n    padding: [12, 12, 12, 12],\n    radius: 20,\n};\nexports.defaultGlobalConfig = {\n    type: 'scroll',\n    lifeTime: 200,\n};\nexports.imageAndTextSpace = 12;\nexports.screenSpace = 32;\nexports.employTrackSpaceX = 20;\nexports.employTrackSpaceY = 20;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uc3RhbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjb25zdGFudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVhLFFBQUEsbUJBQW1CLEdBQVk7SUFDMUMsUUFBUSxFQUFFLEVBQUU7SUFDWixTQUFTLEVBQUUsTUFBTTtJQUNqQixVQUFVLEVBQUUsaUJBQWlCO0lBQzdCLFVBQVUsRUFBRSxFQUFFO0lBQ2QsSUFBSSxFQUFFLE1BQU07SUFDWixPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDekIsTUFBTSxFQUFFLEVBQUU7Q0FDWCxDQUFDO0FBRVcsUUFBQSxtQkFBbUIsR0FBa0I7SUFDaEQsSUFBSSxFQUFFLFFBQVE7SUFDZCxRQUFRLEVBQUUsR0FBRztDQUNkLENBQUM7QUFFVyxRQUFBLGlCQUFpQixHQUFHLEVBQUUsQ0FBQztBQUV2QixRQUFBLFdBQVcsR0FBRyxFQUFFLENBQUM7QUFFakIsUUFBQSxpQkFBaUIsR0FBRyxFQUFFLENBQUM7QUFDdkIsUUFBQSxpQkFBaUIsR0FBRyxFQUFFLENBQUMifQ==","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction createId(pre = '') {\n    function S4() {\n        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    }\n    function guid() {\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\n    }\n    return pre + guid();\n}\nexports.createId = createId;\nfunction wait(time = 1000) {\n    return new Promise(resolve => {\n        setTimeout(() => {\n            resolve();\n        }, time);\n    });\n}\nexports.wait = wait;\nexports.createCanvas = (id, containerWidth, containerHeight) => {\n    const element = window.document.createElement('canvas');\n    element.id = id;\n    element.width = containerWidth;\n    element.height = containerHeight;\n    return element;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ1dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLFNBQWdCLFFBQVEsQ0FBQyxNQUFjLEVBQUU7SUFDdkMsU0FBUyxFQUFFO1FBQ1QsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUN4RSxDQUFDO0lBRUQsU0FBUyxJQUFJO1FBQ1gsT0FBTyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFBO0lBQ3hGLENBQUM7SUFFRCxPQUFPLEdBQUcsR0FBRyxJQUFJLEVBQUUsQ0FBQTtBQUNyQixDQUFDO0FBVkQsNEJBVUM7QUFFRCxTQUFnQixJQUFJLENBQUMsT0FBZSxJQUFJO0lBQ3RDLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDM0IsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLE9BQU8sRUFBRSxDQUFBO1FBQ1gsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFBO0lBQ1YsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDO0FBTkQsb0JBTUM7QUFFWSxRQUFBLFlBQVksR0FBRyxDQUFDLEVBQVUsRUFBRSxjQUFzQixFQUFFLGVBQXVCLEVBQXFCLEVBQUU7SUFDN0csTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDeEQsT0FBTyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDaEIsT0FBTyxDQUFDLEtBQUssR0FBRyxjQUFjLENBQUM7SUFDL0IsT0FBTyxDQUFDLE1BQU0sR0FBRyxlQUFlLENBQUM7SUFFakMsT0FBTyxPQUFPLENBQUM7QUFDakIsQ0FBQyxDQUFDIn0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst constant_1 = require(\"./constant\");\nexports.loadingImage = (src) => {\n    return new Promise(resolve => {\n        const image = new Image();\n        image.crossOrigin = '';\n        image.src = src;\n        image.onload = () => {\n            resolve(image);\n        };\n        image.onerror = () => {\n            resolve(null);\n        };\n    });\n};\nexports.getRandomColor = () => ('rgb(' + parseInt(String(Math.random() * 255)) + ','\n    + parseInt(String(Math.random() * 255)) + ','\n    + parseInt(String(Math.random() * 255)) + ')');\nexports.mixConfig = (config, defaultConfig) => {\n    Object.keys(defaultConfig).forEach(key => {\n        if (typeof config[key] === 'undefined') {\n            config[key] = defaultConfig[key];\n        }\n    });\n    return config;\n};\nfunction getCanUseTrack(employTrack, allTrack, height) {\n    const spaceTracks = [];\n    if (employTrack.length !== 0) {\n        const useTrack = employTrack\n            .map(range => (range.split(',').map(value => parseFloat(value))))\n            .sort((a, b) => (a[0] > b[0] ? 1 : -1));\n        const tracks = [];\n        useTrack.forEach((track, index) => {\n            if (index === 0) {\n                tracks.push(track);\n                return;\n            }\n            const prevTrack = tracks[tracks.length - 1];\n            const [min, max] = track;\n            if (prevTrack[1] + constant_1.employTrackSpaceY > min) {\n                prevTrack[1] = max;\n                return;\n            }\n            tracks.push(track);\n        });\n        const [start] = tracks[0];\n        const [, end] = tracks[tracks.length - 1];\n        if (allTrack[0] < start) {\n            spaceTracks.push([allTrack[0], start]);\n        }\n        if (allTrack[1] > end) {\n            spaceTracks.push([end, allTrack[1]]);\n        }\n        if (tracks.length > 1) {\n            let startTrack;\n            tracks.forEach(track => {\n                if (startTrack === undefined) {\n                    startTrack = track[1];\n                }\n                else {\n                    spaceTracks.push([startTrack, track[0]]);\n                    startTrack = track[0];\n                }\n            });\n        }\n    }\n    else {\n        spaceTracks.push([...allTrack]);\n    }\n    for (let i = 0; i < spaceTracks.length; i += 1) {\n        const spaceTrack = spaceTracks[i];\n        if (spaceTrack[1] - spaceTrack[0] > height + constant_1.employTrackSpaceY) {\n            return [spaceTrack[0], spaceTrack[0] + height + constant_1.employTrackSpaceY];\n        }\n    }\n    return null;\n}\nexports.getCanUseTrack = getCanUseTrack;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ1dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHlDQUE2QztBQUVoQyxRQUFBLFlBQVksR0FBRyxDQUFDLEdBQUcsRUFBOEIsRUFBRTtJQUM5RCxPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQzNCLE1BQU0sS0FBSyxHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7UUFDMUIsS0FBSyxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7UUFDdkIsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDaEIsS0FBSyxDQUFDLE1BQU0sR0FBRyxHQUFHLEVBQUU7WUFDbEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pCLENBQUMsQ0FBQztRQUNGLEtBQUssQ0FBQyxPQUFPLEdBQUcsR0FBRyxFQUFFO1lBQ25CLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNmLENBQUMsQ0FBQTtJQUNILENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDO0FBRVcsUUFBQSxjQUFjLEdBQUcsR0FBVyxFQUFFLENBQUMsQ0FDMUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRztNQUNsRCxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUc7TUFDM0MsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQzlDLENBQUM7QUFFVyxRQUFBLFNBQVMsR0FBRyxDQUFDLE1BQU0sRUFBRSxhQUFhLEVBQUUsRUFBRTtJQUNqRCxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFB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","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Scene_1 = __importDefault(require(\"./Scene\"));\nconst Sprite_1 = __importDefault(require(\"./Sprite\"));\nconst utils_1 = require(\"./utils\");\nconst constant_1 = require(\"./constant\");\nclass Barrage {\n    constructor(container, globalConfig = {}) {\n        this.globalConfig = utils_1.mixConfig(globalConfig, constant_1.defaultGlobalConfig);\n        // 创建场景\n        this.scene = new Scene_1.default(container, this.globalConfig);\n        this.stop = this.scene.stop.bind(this.scene);\n        this.start = this.scene.start.bind(this.scene);\n        this.clear = this.scene.clear.bind(this.scene);\n    }\n    add({ content, avatar }) {\n        this.scene.add(new Sprite_1.default({\n            avatar, content\n        }, {\n            ctx: this.scene.ctx,\n        }));\n    }\n}\nexports.default = Barrage;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLG9EQUE0QjtBQUM1QixzREFBOEI7QUFFOUIsbUNBQWtDO0FBQ2xDLHlDQUErQztBQUUvQyxNQUFNLE9BQU87SUFPWCxZQUFtQixTQUFzQixFQUFFLGVBQThCLEVBQUU7UUFDekUsSUFBSSxDQUFDLFlBQVksR0FBRyxpQkFBUyxDQUFDLFlBQVksRUFBRSw4QkFBbUIsQ0FBa0IsQ0FBQztRQUNsRixPQUFPO1FBQ1AsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLGVBQUssQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRXJELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFFTSxHQUFHLENBQUMsRUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFTO1FBQ2xDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUNaLElBQUksZ0JBQU0sQ0FBQztZQUNULE1BQU0sRUFBRSxPQUFPO1NBQ2hCLEVBQUU7WUFDRCxHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHO1NBQ3BCLENBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztDQUNGO0FBRUQsa0JBQWUsT0FBTyxDQUFDIn0=","import Barrage from '../packages/Barrage';\n\nwindow.barrage = new Barrage(\n  document.getElementById('webgl'),\n  {\n    type: \"scroll\"\n  }\n);\nlet count = 0;\n\nwindow.add = () => {\n  window.timer = setInterval(() => {\n    window.barrage.add({\n      content: '李四：你好呀 🤘🏻111',\n      avatar: 'http://thirdwx.qlogo.cn/mmopen/vi_32/JqfbL9Z2prhybabOMfPUELUQAichrtTLCWFCUr6hTicMCE77qwSPsHm7wRNpzPY2kdG3RrlLco6shVAiatGtsIDgw/132',\n    });\n    count += 1;\n    if (count > 500) {\n      clearInterval(window.time);\n    }\n  }, 100);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\nconst utils_2 = require(\"../utils/utils\");\nconst constant_1 = require(\"./constant\");\nconst utils_3 = require(\"../utils/utils\");\nlet STATUS = false;\nclass Scene {\n    constructor(container, globalConfig) {\n        this.timer = null;\n        this.sprites = {};\n        this.queue = [];\n        this.employTrack = {};\n        this.initCanvas(container);\n        this.globalConfig = globalConfig;\n        this.status = true;\n        window.addEventListener('resize', this.resize.bind(this));\n    }\n    static get status() {\n        return STATUS;\n    }\n    set status(status) {\n        if (STATUS === status) {\n            return;\n        }\n        STATUS = status;\n        if (!STATUS) {\n            this.stop();\n            return;\n        }\n        if (this.timer !== null) {\n            return;\n        }\n        this.run();\n    }\n    calcAnimation(rect, top = 12) {\n        const [barrageWidth] = rect;\n        if (this.globalConfig.type === 'reversescroll') {\n            const speedX = (this.containerWidth + barrageWidth) / this.globalConfig.lifeTime;\n            return {\n                position: [-barrageWidth, top],\n                speed: [speedX, 0],\n                rangeWidth: [-barrageWidth, this.containerWidth + barrageWidth]\n            };\n        }\n        // scroll\n        const speedX = -(this.containerWidth + barrageWidth) / this.globalConfig.lifeTime;\n        return {\n            position: [this.containerWidth, top],\n            speed: [speedX, 0],\n            rangeWidth: [-barrageWidth, this.containerWidth],\n        };\n    }\n    add(sprite) {\n        sprite.id = utils_2.createId('sprite-');\n        this.queue.push(sprite);\n    }\n    addSprite(sprite, top) {\n        sprite.setAnimation(this.calcAnimation(sprite.rect, top));\n        this.sprites[sprite.id] = sprite;\n    }\n    calcEmployTrack(height) {\n        const employ = Object.values(this.employTrack);\n        const employTrackPosition = utils_1.getCanUseTrack(employ, this.trackTop, height);\n        if (employTrackPosition) {\n            return employTrackPosition;\n        }\n        return null;\n    }\n    calcPosition() {\n        if (this.queue.length === 0) {\n            return;\n        }\n        const [sprite] = this.queue;\n        const [, height] = sprite.rect;\n        const employTrackPosition = this.calcEmployTrack(height);\n        if (employTrackPosition) {\n            this.employTrack[sprite.id] = employTrackPosition.toString();\n            sprite.employTrack = true;\n            this.addSprite(sprite, employTrackPosition[0]);\n            this.queue.shift();\n        }\n    }\n    start() {\n        this.status = true;\n    }\n    stop() {\n        this.timer = null;\n        this.status = false;\n    }\n    clear() {\n        this.sprites = {};\n    }\n    run() {\n        if (!Scene.status) {\n            return;\n        }\n        this.calcPosition();\n        this.render();\n        const run = this.run.bind(this);\n        this.timer = window.requestAnimationFrame(run);\n    }\n    resize() {\n        this.containerWidth = this.container.offsetWidth;\n        this.containerHeight = this.container.offsetHeight;\n    }\n    initCanvas(container) {\n        const { offsetWidth, offsetHeight } = container;\n        this.container = container;\n        this.containerWidth = offsetWidth;\n        this.containerHeight = offsetHeight;\n        const canvas = utils_3.createCanvas('canvas-huiyidun', offsetWidth, offsetHeight);\n        canvas.style.position = 'absolute';\n        canvas.style.display = 'block';\n        this.container.append(canvas);\n        this.ctx = canvas.getContext('2d');\n        this.trackTop = [constant_1.screenSpace, this.containerHeight - constant_1.screenSpace];\n    }\n    render() {\n        this.ctx.clearRect(0, 0, this.containerWidth, this.containerHeight);\n        Object.keys(this.sprites).forEach(uid => {\n            const sprite = this.sprites[uid];\n            sprite.animation({\n                type: this.globalConfig.type,\n                containerWidth: this.containerWidth,\n            });\n            if (!sprite.employTrack && this.employTrack[sprite.id]) {\n                delete this.employTrack[sprite.id];\n            }\n            if (!sprite.status) {\n                delete this.sprites[uid];\n            }\n            else {\n                sprite.render(this.ctx);\n            }\n        });\n    }\n}\nexports.default = Scene;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2NlbmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJTY2VuZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLG1DQUF1QztBQUN2QywwQ0FBd0M7QUFFeEMseUNBQXVDO0FBQ3ZDLDBDQUE0QztBQUU1QyxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUM7QUFFbkIsTUFBTSxLQUFLO0lBd0NULFlBQW1CLFNBQXNCLEVBQUUsWUFBMkI7UUFWOUQsVUFBSyxHQUFHLElBQUksQ0FBQztRQUliLFlBQU8sR0FBNEIsRUFBRSxDQUFDO1FBRXRDLFVBQUssR0FBYSxFQUFFLENBQUM7UUFFckIsZ0JBQVcsR0FBbUMsRUFBRSxDQUFDO1FBR3ZELElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDakMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDbkIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUF0Q08sTUFBTSxLQUFLLE1BQU07UUFDdkIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVELElBQVksTUFBTSxDQUFDLE1BQWU7UUFDaEMsSUFBSSxNQUFNLEtBQUssTUFBTSxFQUFFO1lBQ3JCLE9BQU07U0FDUDtRQUVELE1BQU0sR0FBRyxNQUFNLENBQUM7UUFFaEIsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNYLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNaLE9BQU87U0FDUjtRQUVELElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxJQUFJLEVBQUU7WUFDdkIsT0FBTztTQUNSO1FBRUQsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ2IsQ0FBQztJQW1CTyxhQUFhLENBQUMsSUFBSSxFQUFFLEdBQUcsR0FBRyxFQUFFO1FB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","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\nconst constant_1 = require(\"./constant\");\nclass Sprite {\n    constructor(spriteArgs, globalConfig) {\n        this.status = true;\n        this.speed = [1, 1];\n        this.position = null;\n        // 占用起飞跑道标志\n        this.employTrack = false;\n        const { avatar, fontFamily, fontColor, fontSize, avatarSize, content, padding, radius, } = utils_1.mixConfig(spriteArgs, constant_1.defaultSpriteConfig);\n        this.content = content;\n        this.style = {\n            padding,\n            avatarSize,\n            radius\n        };\n        this.font = {\n            fontFamily,\n            fontColor,\n            fontSize,\n        };\n        this.loadingImage(avatar);\n        this.rect = this.calcRect(globalConfig.ctx);\n        const canvas = document.createElement('canvas');\n        canvas.width = this.rect[0];\n        canvas.height = this.rect[1];\n        this.templateCanvas = canvas;\n        this.getImageData();\n    }\n    set avatarStatus(status) {\n        if (status) {\n            this.getImageData();\n        }\n    }\n    getImageData() {\n        this.templateCtx = this.templateCanvas.getContext('2d');\n        this.templateCtx.clearRect(0, 0, this.rect[0], this.rect[1]);\n        this.draw(this.templateCtx);\n    }\n    render(ctx) {\n        ctx.drawImage(this.templateCanvas, ...this.position);\n    }\n    loadingImage(avatar) {\n        (() => __awaiter(this, void 0, void 0, function* () {\n            if (avatar) {\n                // 头像\n                this.avatar = (yield utils_1.loadingImage(avatar)) || null;\n                this.avatarStatus = true;\n            }\n        }))();\n    }\n    // 计算尺寸\n    calcRect(ctx) {\n        const [paddingTop, paddingRight, paddingBottom, paddingLeft] = this.style.padding;\n        ctx.save();\n        ctx.font = `${this.font.fontSize}px ${this.font.fontFamily}`;\n        const measureText = ctx.measureText(this.content);\n        ctx.restore();\n        const barrageAllWidth = (this.style.avatarSize + constant_1.imageAndTextSpace + measureText.width +\n            paddingLeft + paddingRight);\n        const barrageAllHeight = (Math.max(this.style.avatarSize, this.font.fontSize) +\n            paddingTop + paddingBottom);\n        return [Math.floor(barrageAllWidth), barrageAllHeight];\n    }\n    // 设置关于运动的参数\n    setAnimation({ position, speed, rangeWidth }) {\n        this.position = position;\n        this.speed = speed;\n        this.rangeWidth = rangeWidth;\n    }\n    draw(ctx) {\n        const [, , left] = this.style.padding;\n        // 头像\n        const avatarSpaceTop = (this.rect[1] - this.style.avatarSize) / 2;\n        if (this.avatar && typeof this.avatar !== 'string') {\n            Sprite.drawAvatar(ctx, {\n                img: this.avatar,\n                position: [left, avatarSpaceTop],\n                imageHeight: this.style.avatarSize,\n                imageWidth: this.style.avatarSize,\n                radius: this.style.radius,\n            });\n        }\n        else {\n            // todo 留出位置\n        }\n        const textSpaceTop = (this.rect[1] - this.font.fontSize - 5) / 2;\n        this.drawText(ctx, {\n            left: this.style.avatarSize + constant_1.imageAndTextSpace + left,\n            top: textSpaceTop\n        });\n        this.drawBorder(ctx);\n    }\n    static checkEmployTrack({ left, width, type, containerWidth }) {\n        if (type === 'reversescroll') {\n            if (left > constant_1.employTrackSpaceX) {\n                return false;\n            }\n        }\n        if (type === 'scroll') {\n            if (left < containerWidth - width - constant_1.employTrackSpaceX) {\n                return false;\n            }\n        }\n        return true;\n    }\n    animation({ type, containerWidth }) {\n        if (!this.position) {\n            return;\n        }\n        const left = this.position[0] + this.speed[0];\n        const top = this.position[1] + this.speed[1];\n        const offsetWidth = (this.rangeWidth &&\n            (this.rangeWidth[0] > left ||\n                this.rangeWidth[1] < left));\n        if (offsetWidth) {\n            this.status = false;\n            return;\n        }\n        this.position = [left, top];\n        if (this.employTrack) {\n            this.employTrack = Sprite.checkEmployTrack({\n                left,\n                type,\n                containerWidth,\n                width: this.rect[0],\n            });\n        }\n    }\n    remove() {\n        this.status = false;\n    }\n    drawBorder(ctx, pos = {}) {\n        const { left = 0, top = 0 } = pos;\n        const [barrageAllWidth, barrageAllHeight] = this.rect;\n        //x轴方向的阴影偏移量,负数为向右偏移量\n        ctx.shadowOffsetX = 3;\n        //y轴方向的阴影偏移量,负数为向上偏移量\n        ctx.shadowOffsetY = 3;\n        //阴影模糊强度\n        ctx.shadowBlur = 12;\n        ctx.shadowColor = \"rgba(46, 141, 239, 0.4)\";\n        ctx.strokeStyle = 'rgba(46, 141, 239, 1)';\n        ctx.strokeRect(left, top, barrageAllWidth, barrageAllHeight);\n    }\n    drawText(ctx, { left = 0, top = 0 }) {\n        ctx.fillStyle = this.font.fontColor;\n        ctx.font = `${this.font.fontSize}px ${this.font.fontFamily}`;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'top';\n        ctx.fillText(this.content, left, top);\n    }\n    static drawAvatar(ctx, roundImageArgs) {\n        const { img, imageWidth, imageHeight, position, } = roundImageArgs;\n        let { radius } = roundImageArgs;\n        radius = radius > Math.max(imageWidth, imageHeight) / 2 ? Math.max(imageHeight, imageWidth) / 2 : radius;\n        const [x, y] = position;\n        ctx.save();\n        if (img) {\n            ctx.beginPath();\n            ctx.moveTo(x + radius, y);\n            ctx.lineTo(x + imageWidth - radius, y);\n            ctx.quadraticCurveTo(x + imageWidth, y, x + imageWidth, y + radius);\n            ctx.lineTo(x + imageWidth, y + imageHeight - radius);\n            ctx.quadraticCurveTo(x + imageWidth, y + imageHeight, x + imageWidth - radius, y + imageHeight);\n            ctx.lineTo(x + radius, y + imageHeight);\n            ctx.quadraticCurveTo(x, y + imageHeight, x, y + imageHeight - radius);\n            ctx.lineTo(x, y + radius);\n            ctx.quadraticCurveTo(x, y, x + radius, y);\n            ctx.closePath();\n            ctx.clip();\n            const { width, height } = img;\n            ctx.drawImage(img, 0, 0, width, height, x, y, imageWidth, imageHeight);\n        }\n        else {\n        }\n        ctx.restore();\n    }\n    ;\n}\nexports.default = Sprite;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3ByaXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiU3ByaXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsbUNBQWdEO0FBTWhELHlDQUFxRjtBQUVyRixNQUFNLE1BQU07SUEyQlYsWUFBbUIsVUFBbUIsRUFBRSxZQUEyQjtRQTFCNUQsV0FBTSxHQUFZLElBQUksQ0FBQztRQUN0QixVQUFLLEdBQXFCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBSWxDLGFBQVEsR0FBcUIsSUFBSSxDQUFDO1FBVXpDLFdBQVc7UUFDSixnQkFBVyxHQUFHLEtBQUssQ0FBQztRQVd6QixNQUFNLEVBQ0osTUFBTSxFQUNOLFVBQVUsRUFDVixTQUFTLEVBQ1QsUUFBUSxFQUNSLFVBQVUsRUFDVixPQUFPLEVBQ1AsT0FBTyxFQUNQLE1BQU0sR0FDUCxHQUFHLGlCQUFTLENBQUMsVUFBVSxFQUFFLDhCQUFtQixDQUFZLENBQUM7UUFDMUQsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDdkIsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNYLE9BQU87WUFDUCxVQUFVO1lBQ1YsTUFBTTtTQUNQLENBQUM7UUFDRixJQUFJLENBQUMsSUFBSSxHQUFHO1lBQ1YsVUFBVTtZQUNWLFNBQVM7WUFDVCxRQUFRO1NBQ1QsQ0FBQztRQUVGLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFMUIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM1QyxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2hELE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QixNQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxD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"],"sourceRoot":""}